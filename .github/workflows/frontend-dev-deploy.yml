name: Build & Deploy Frontend to Dev
run-name: "Build & Deploy Frontend to Dev Ц ${{ github.event.inputs.title || github.sha }}"

on:
  workflow_dispatch:
    inputs:
      title:
        description: "Commit Text"
        required: false
        default: ""

jobs:
  build-and-deploy-dev:
    runs-on: [self-hosted, spothub-1]

    env:
      IMAGE_REPO: ${{ secrets.DOCKERHUB_USERNAME }}/full-mvp-frontend

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Docker login to Docker Hub
        run: |
          echo "${{ secrets.DOCKERHUB_TOKEN }}" | docker login -u "${{ secrets.DOCKERHUB_USERNAME }}" --password-stdin

      - name: Compute image tag
        id: vars
        run: |
          SHA="${GITHUB_SHA}"
          echo "Using SHA: ${SHA}"
          echo "tag=dev-${SHA}" >> "$GITHUB_OUTPUT"

      - name: Build frontend image
        run: |
          TAG="${{ steps.vars.outputs.tag }}"
          IMAGE="${IMAGE_REPO}:${TAG}"
          echo "Building image ${IMAGE}..."
          # если Dockerfile ф
